## HTTPS和HTTP的区别  

> 超文本传输协议HTTP协议被用于在Web浏览器和网站服务器之间传递信息。HTTP协议以明文方式发送内容，不提供任何方式的数据加密，如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息，因此HTTP协议不适合传输一些敏感信息，比如信用卡号、密码等。
> 为了解决HTTP协议的这一缺陷，需要使用另一种协议：安全套接字层超文本传输协议HTTPS。为了数据传输的安全，HTTPS在HTTP的基础上加入了SSL协议，SSL依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。
>
>   1. HTTP 与 HTTPS 的基本概念
>     HTTP：超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的WWW文件都必须遵守这个标准。设计HTTP最初的目的是为了提供一种发布和接收HTML页面的方法。
>
>    HTTPS:（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道，简单讲是HTTP的安全版。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。 它是一个URI scheme（抽象标识符体系），句法类同http:体系。用于安全的HTTP数据传输。https:URL表明它使用了HTTP，但HTTPS存在不同于HTTP的默认端口及一个加密/身份验证层（在HTTP与TCP之间）。
>
>   2. HTTPS和HTTP的区别主要为以下四点：
>     一、https协议需要到CA申请证书，一般免费证书很少，需要交费。
>     二、http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议。
>     三、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。
>     四、http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。
>

## HTTP状态码：

> 简单版
> [
>     100  Continue       继续，一般在发送post请求时，已发送了http，header之后服务端将返回此信息，表示确认，之后发送具体参数信息
>
> ​    200  OK             		正常返回信息
>     201  Created        	请求成功并且服务器创建了新的资源
>     202  Accepted       	服务器已接受请求，但尚未处理
>
> ​    301  Moved Permanently  	请求的网页已永久移动到新位置。
>     302 Found          			临时性重定向。
>     303 See Other      			临时性重定向，且总是使用 GET 请求新的 URI。
>     304  Not Modified   			自从上次请求后，请求的网页未修改过。
>
> ​    400 Bad Request     		服务器无法理解请求的格式，客户端不应当尝试再次使用相同的内容发起请求。
>     401 Unauthorized    	请求未授权。
>     403 Forbidden       		禁止访问。
>     404 Not Found      		找不到如何与 URI 相匹配的资源。
>
> ​    500 Internal Server Error       最常见的服务器端错误。
>     503 Service Unavailable         服务器端暂时无法处理请求（可能是过载或维护）。
> ]

> 完整版
>
> 1**(信息类)：表示接收到请求并且继续处理
>     100——客户必须继续发出请求
>     101——客户要求服务器根据请求转换HTTP协议版本
>
> 2**(响应成功)：表示动作被成功接收、理解和接受
>     200——表明该请求被成功地完成，所请求的资源发送回客户端
>     201——提示知道新文件的URL
>     202——接受和处理、但处理未完成
>     203——返回信息不确定或不完整
>     204——请求收到，但返回信息为空
>     205——服务器完成了请求，用户代理必须复位当前已经浏览过的文件
>     206——服务器已经完成了部分用户的GET请求
>
> 3**(重定向类)：为了完成指定的动作，必须接受进一步处理
>     300——请求的资源可在多处得到
>     301——本网页被永久性转移到另一个URL
>     302——请求的网页被转移到一个新的地址，但客户访问仍继续通过原始URL地址，重定向，新的URL会在response中的Location中返回，浏览器将会使用新的URL发出新的Request。
>     303——建议客户访问其他URL或访问方式
>     304——自从上次请求后，请求的网页未修改过，服务器返回此响应时，不会返回网页内容，代表上次的文档已经被缓存了，还可以继续使用
>     305——请求的资源必须从服务器指定的地址得到
>     306——前一版本HTTP中使用的代码，现行版本中不再使用
>     307——申明请求的资源临时性删除
>
> 4**(客户端错误类)：请求包含错误语法或不能正确执行
>     400——客户端请求有语法错误，不能被服务器所理解
>     401——请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用
>         HTTP 401.1 - 未授权：登录失败
>         HTTP 401.2 - 未授权：服务器配置问题导致登录失败
>         HTTP 401.3 - ACL 禁止访问资源
>         HTTP 401.4 - 未授权：授权被筛选器拒绝
>         HTTP 401.5 - 未授权：ISAPI 或 CGI 授权失败
>     402——保留有效ChargeTo头响应
>     403——禁止访问，服务器收到请求，但是拒绝提供服务
>         HTTP 403.1 禁止访问：禁止可执行访问
>         HTTP 403.2 - 禁止访问：禁止读访问
>         HTTP 403.3 - 禁止访问：禁止写访问
>         HTTP 403.4 - 禁止访问：要求 SSL
>         HTTP 403.5 - 禁止访问：要求 SSL 128
>         HTTP 403.6 - 禁止访问：IP 地址被拒绝
>         HTTP 403.7 - 禁止访问：要求客户证书
>         HTTP 403.8 - 禁止访问：禁止站点访问
>         HTTP 403.9 - 禁止访问：连接的用户过多
>         HTTP 403.10 - 禁止访问：配置无效
>         HTTP 403.11 - 禁止访问：密码更改
>         HTTP 403.12 - 禁止访问：映射器拒绝访问
>         HTTP 403.13 - 禁止访问：客户证书已被吊销
>         HTTP 403.15 - 禁止访问：客户访问许可过多
>         HTTP 403.16 - 禁止访问：客户证书不可信或者无效
>         HTTP 403.17 - 禁止访问：客户证书已经到期或者尚未生效
>     404——一个404错误表明可连接服务器，但服务器无法取得所请求的网页，请求资源不存在。eg：输入了错误的URL
>     405——用户在Request-Line字段定义的方法不允许
>     406——根据用户发送的Accept拖，请求资源不可访问
>     407——类似401，用户必须首先在代理服务器上得到授权
>     408——客户端没有在用户指定的饿时间内完成请求
>     409——对当前资源状态，请求不能完成
>     410——服务器上不再有此资源且无进一步的参考地址
>     411——服务器拒绝用户定义的Content-Length属性请求
>     412——一个或多个请求头字段在当前请求中错误
>     413——请求的资源大于服务器允许的大小
>     414——请求的资源URL长于服务器允许的长度
>     415——请求资源不支持请求项目格式
>     416——请求中包含Range请求头字段，在当前请求资源范围内没有range指示值，请求也不包含If-Range请求头字段
>     417——服务器不满足请求Expect头字段指定的期望值，如果是代理服务器，可能是下一级服务器不能满足请求长。
>
> 5**(服务端错误类)：服务器不能正确执行一个正确的请求
>     	HTTP 500 - 服务器遇到错误，无法完成请求
>   	HTTP 500.100 - 内部服务器错误 - ASP 错误
>   　	HTTP 500-11 服务器关闭
>   　	HTTP 500-12 应用程序重新启动
>   　	HTTP 500-13 - 服务器太忙
>   　	HTTP 500-14 - 应用程序无效
>   　	HTTP 500-15 - 不允许请求 global.asa
>   　	Error 501 - 未实现
>     	HTTP 502 - 网关错误
>     	HTTP 503：由于超载或停机维护，服务器目前无法使用，一段时间后可能恢复正常


## Web页面请求过程

1. DHCP 配置主机信息

  > 假设主机最开始没有 IP 地址以及其它信息，那么就需要先使用 DHCP 来获取。
  >
  > 主机生成一个 DHCP 请求报文，并将这个报文放入具有目的端口 67 和源端口 68 的 UDP 报文段中。
  >
  > 该报文段则被放入在一个具有广播 IP 目的地址(255.255.255.255) 和源 IP 地址（0.0.0.0）的 IP 数据报中。
  >
  > 该数据报则被放置在 MAC 帧中，该帧具有目的地址 FF:FF:FF:FF:FF:FF，将广播到与交换机连接的所有设备。
  >
  > 连接在交换机的 DHCP 服务器收到广播帧之后，不断地向上分解得到 IP 数据报、UDP 报文段、DHCP 请求报文，之后生成 DHCP ACK 报文，该报文包含以下信息：IP 地址、DNS 服务器的 IP 地址、默认网关路由器的 IP 地址和子网掩码。该报文被放入 UDP 报文段中，UDP 报文段有被放入 IP 数据报中，最后放入 MAC 帧中。
  >
  > 该帧的目的地址是请求主机的 MAC 地址，因为交换机具有自学习能力，之前主机发送了广播帧之后就记录了 MAC 地址到其转发接口的交换表项，因此现在交换机就可以直接知道应该向哪个接口发送该帧。
  >
  > 主机收到该帧后，不断分解得到 DHCP 报文。之后就配置它的 IP 地址、子网掩码和 DNS 服务器的 IP 地址，并在其 IP 转发表中安装默认网关。

2. ARP 解析 MAC 地址

  > 主机通过浏览器生成一个 TCP 套接字，套接字向 HTTP 服务器发送 HTTP 请求。为了生成该套接字，主机需要知道网站的域名对应的 IP 地址。
  >
  > 主机生成一个 DNS 查询报文，该报文具有 53 号端口，因为 DNS 服务器的端口号是 53。
  >
  > 该 DNS 查询报文被放入目的地址为 DNS 服务器 IP 地址的 IP 数据报中。
  >
  > 该 IP 数据报被放入一个以太网帧中，该帧将发送到网关路由器。
  >
  > DHCP 过程只知道网关路由器的 IP 地址，为了获取网关路由器的 MAC 地址，需要使用 ARP 协议。
  >
  > 主机生成一个包含目的地址为网关路由器 IP 地址的 ARP 查询报文，将该 ARP 查询报文放入一个具有广播目的地址（FF:FF:FF:FF:FF:FF）的以太网帧中，并向交换机发送该以太网帧，交换机将该帧转发给所有的连接设备，包括网关路由器。
  >
  > 网关路由器接收到该帧后，不断向上分解得到 ARP 报文，发现其中的 IP 地址与其接口的 IP 地址匹配，因此就发送一个 ARP 回答报文，包含了它的 MAC 地址，发回给主机。

3. DNS 解析域名

  > 知道了网关路由器的 MAC 地址之后，就可以继续 DNS 的解析过程了。
  >
  > 网关路由器接收到包含 DNS 查询报文的以太网帧后，抽取出 IP 数据报，并根据转发表决定该 IP 数据报应该转发的路由器。
  >
  > 因为路由器具有内部网关协议（RIP、OSPF）和外部网关协议（BGP）这两种路由选择协议，因此路由表中已经配置了网关路由器到达 DNS 服务器的路由表项。
  >
  > 到达 DNS 服务器之后，DNS 服务器抽取出 DNS 查询报文，并在 DNS 数据库中查找待解析的域名。
  >
  > 找到 DNS 记录之后，发送 DNS 回答报文，将该回答报文放入 UDP 报文段中，然后放入 IP 数据报中，通过路由器反向转发回网关路由器，并经过以太网交换机到达主机。

4. HTTP 请求页面

  > 有了 HTTP 服务器的 IP 地址之后，主机就能够生成 TCP 套接字，该套接字将用于向 Web 服务器发送 HTTP GET 报文。
  >
  > 在生成 TCP 套接字之前，必须先与 HTTP 服务器进行三次握手来建立连接。生成一个具有目的端口 80 的 TCP SYN 报文段，并向 HTTP 服务器发送该报文段。
  >
  > HTTP 服务器收到该报文段之后，生成 TCP SYN ACK 报文段，发回给主机。
  >
  > 连接建立之后，浏览器生成 HTTP GET 报文，并交付给 HTTP 服务器。
  >
  > HTTP 服务器从 TCP 套接字读取 HTTP GET 报文，生成一个 HTTP 响应报文，将 Web 页面内容放入报文主体中，发回给主机。
  >
  > 浏览器收到 HTTP 响应报文后，抽取出 Web 页面内容，之后进行渲染，显示 Web 页面。

5. 浏览器解析渲染

  > 以HTML为例：
  > 解析html以构建dom树 -> 构建render树 -> 布局render树 -> 绘制render树。
  >
  > 当浏览器获得一个html文件时，会“自上而下”加载，并在加载过程中进行解析渲染。 
  >
  > 解析： 
  >   1. 浏览器会将HTML解析成一个DOM树，DOM 树的构建过程是一个深度遍历过程：当前节点的所有子节点都构建好后才会去构建当前节点的下一个兄弟节点。 
  >   2. 将CSS解析成 CSS Rule Tree 。 
  >   3. 根据DOM树和CSSOM来构造 Rendering Tree。
  >     注意：Rendering Tree 渲染树并不等同于 DOM 树，因为一些像 Header 或 display:none 的东西就没必要放在渲染树中了。
  >   4. 有了Render Tree，浏览器已经能知道网页中有哪些节点、各个节点的CSS定义以及他们的从属关系。下一步操作称之为Layout，顾名思义就是计算出每个节点在屏幕中的位置。 
  >   5. 再下一步就是绘制，即遍历render树，并使用UI后端层绘制每个节点。
  >
  > 上述过程是逐步完成的，为了更好的用户体验，渲染引擎将会尽可能早的将内容呈现到屏幕上，并不会等到所有的html都解析完成之后再去构建和布局render树。它是解析完一部分内容就显示一部分内容，同时，可能还在通过网络下载其余内容。